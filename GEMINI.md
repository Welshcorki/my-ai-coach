# Gemini CLI Plan

This file will contain the plan and tasks to be executed by the Gemini CLI.

## 작업 기록 (Work Log)
- **2025-11-29:**
    - **UI/UX 개선 및 버그 수정:**
        - **마크다운 렌더링:** `@tailwindcss/typography` 플러그인 적용으로 채팅 내 마크다운(`**굵은 글씨**` 등) 스타일 정상화.
        - **로딩 인디케이터:** AI 응답 대기 시 빈 말풍선과 로딩 애니메이션이 중복으로 뜨는 현상 수정.
        - **데이터 지속성(Persistence):** `localStorage`를 도입하여 새로고침 후에도 학습 로드맵과 채팅 내역이 유지되도록 구현 (`App.tsx`).
        - **입력창 UI:** 브라우저 Autofill 시 입력창 배경색 왜곡 문제 해결.
    - **기능 고도화 (로드맵 생성):**
        - 학습 빈도(Frequency) 설정이 실제 로드맵 생성 AI 프롬프트에 반영되도록 구현.
    - **기능 고도화 (AI 검증 & 체크박스 제어):**
        - 실습/지식 이원화 검증 및 `[MISSION_COMPLETE]` 태그 도입.
        - 체크박스 잠금/해제 및 자동 진행 요청 시스템 구현.

- **2025-11-28:**
    - **아키텍처 분석 & 통합:** React 프론트엔드(Vite)와 FastAPI 백엔드 통합 및 서빙 구현 완료.
    - **트러블슈팅 (프론트엔드):**
        - 채팅 응답 시 스크롤이 맨 위로 튀는 문제 해결 (`messagesEndRef` 위치 수정).
        - 로딩 후 입력창 포커스 상실 문제 해결 (`useRef` 및 `useEffect`로 포커스 강제).
        - API 요청 시 불필요한 필드(`id` 등)로 인한 `422` 에러 해결 (`extra='ignore'`).
    - **트러블슈팅 (백엔드/AI):**
        - AI 답변이 길어서 잘리는 문제 해결 (`max_output_tokens=1000` 상향).
        - AI가 너무 긴 답변을 한 번에 쏟아내는 문제 해결 (시스템 프롬프트 개선).
        - `watchfiles` 로그 과다 출력 문제 해결 (로그 레벨 조정).
        - 응답 포맷 불일치(`response` vs `text`) 해결.
    - **기능 개선 계획 수립:** AI의 학습 검증 능력 강화(퀴즈 도입) 및 자동화(체크박스 제어)를 단계적으로 추진하기로 결정.
    - **로드맵 기능 고도화 진행 중:**
        - `frontend/src/components/SetupScreen.tsx` 수정 완료 (학습 빈도 UI 및 데이터 상태 추가).

## 작업 기록 (Work Log)
- **2025-11-29:**
    - **멀티 로드맵 기능 구현 (옵션 A):**
        - **백엔드:** `GET /roadmaps`, `GET /roadmap/{id}` API 추가 및 기존 API(`chat`, `mission`)를 `roadmap_id` 기반으로 수정.
        - **프론트엔드:** `SetupScreen`에 "나의 학습 목록" UI 추가, 앱 시작 시 목록 조회 로직 구현, 이어하기 기능 완성.
    - **데이터베이스 구축 (SQLite):**
        - `SQLAlchemy` 도입 및 `app/core/database.py` 설정.
        - `Roadmap`, `Mission`, `ChatHistory` 모델 정의 및 자동 테이블 생성 구현.
        - 백엔드 API 전면 수정: 로드맵 생성, 채팅 기록, 미션 완료 상태가 `app.db`에 영구 저장되도록 변경.
        - 프론트엔드 연동: `localStorage` 제거 후 `GET /roadmap/current`, `PUT /mission/complete` API 연동.
    - **UI/UX 개선 및 버그 수정:**
        - **마크다운 렌더링:** `@tailwindcss/typography` 플러그인 적용으로 채팅 내 마크다운(`**굵은 글씨**` 등) 스타일 정상화.
        - **로딩 인디케이터:** AI 응답 대기 시 빈 말풍선과 로딩 애니메이션이 중복으로 뜨는 현상 수정.
        - **입력창 UI:** 브라우저 Autofill 시 입력창 배경색 왜곡 문제 해결.
    - **기능 고도화:**
        - 학습 빈도(Frequency) 설정 반영 로드맵 생성.
        - 실습/지식 이원화 검증 및 `[MISSION_COMPLETE]` 태그 시스템.

## Current Task: 시스템 안정화 및 추가 기능 개발

### 1. 시스템 안정화
- [ ] DB 마이그레이션 도구(Alembic) 도입 검토 (추후 스키마 변경 대비).
- [ ] 예외 처리 강화 (API 호출 실패 시 UX 개선).

### 2. 추가 기능
- [ ] 사용자 관리 (로그인/회원가입) 시스템 도입 검토.
- [ ] 학습 통계 대시보드 고도화 (주간/월간 리포트).

## 완료된 작업 (Completed)

### 2025-11-29
- [x] **멀티 로드맵 지원:** 여러 학습 프로젝트를 동시에 관리하고 이어할 수 있는 기능 구현.
- [x] **데이터베이스 구축 (SQLite):** 영구 데이터 저장소(`app.db`) 구축 및 프론트엔드/백엔드 연동 완료.
- [x] **UI/UX 개선:** 마크다운 렌더링, 로딩 UI 중복 제거, 입력창 색상 수정.
- [x] **기능 고도화:** 학습 빈도 반영, 이원화 검증, 체크박스 제어 시스템.

### 2025-11-28
- [x] **시스템 통합:** React(Vite) + FastAPI 통합 및 서빙 환경 구축.
- [x] **트러블슈팅:** 채팅 스크롤, 포커스, 422 에러, AI 답변 길이 제한 등 해결.
- **프로젝트 아키텍처 전략:**
    - 프론트엔드 구조: 'frontend/' 폴더를 표준 Vite 프로젝트 구조(src, public)로 재구성합니다.
    - 개발/배포 흐름:
        - 소스 코드는 'frontend/'에 위치합니다.
        - 빌드 결과물은 'static/'으로 출력됩니다.
        - FastAPI는 단순성과 통합된 배포를 위해 'static/'을 서빙합니다.
        - 프론트엔드 변경이 자주 발생하지 않는 경우, 개발은 필요할 때마다 프론트엔드를 다시 빌드하는 방식으로 진행하며, 두 개의 서버를 동시에 실행할 필요를 피합니다.

## Project: Grow (7-Day Plan)
- [x] **1~4일차:** 기초 공사 및 에이전트 구현 완료
- [x] **5일차:** 프론트엔드-백엔드 시스템 통합 및 안정화 완료
- [x] **6일차 (수정):** AI 코칭 로직 고도화 (검증, 퀴즈, 피드백 시스템) 및 로드맵 생성 기능 고도화 - 진행 중
- [x] **7일차:** 시스템 통합 및 고도화 (맥락 인지, UI 개선)

## 프로젝트 구조 분석 (2025-11-29)

현재 프로젝트에서 사용되지 않는 것으로 판단되는 폴더 목록입니다.

*   **`old/`**: 이전 버전의 소스 코드를 담고 있는 백업 폴더. 현재 활성 코드베이스에서 참조되지 않습니다.
*   **`templates/`**: 비어 있는 폴더이며, 현재 FastAPI는 React 빌드 결과물(`static/`)을 서빙하므로 서버 사이드 템플릿 엔진이 사용되지 않습니다.
*   **`data/`**: 비어 있는 폴더이며, 현재 데이터베이스는 프로젝트 루트의 `app.db`를 사용합니다.
*   **`app/agents/`**: `__pycache__`만 포함된 빈 폴더입니다. 과거 `old/app/api`에서 에이전트 로직을 참조했으나, 현재 `app/api` 하위 파일들은 `google.generativeai`를 직접 사용하여 모델을 호출하며, 해당 폴더를 참조하지 않습니다.

이 폴더들은 프로젝트 유지보수 및 코드 정리 시 삭제를 고려할 수 있습니다.